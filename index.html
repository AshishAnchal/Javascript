<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QUIZ</title>
  <style>
    .hidequizdiv {
      display: none;
    }

    .qstart {
      display: none;
    }

    .pscore {
      display: block;
    }
  </style>
</head>

<body>
  <h1>Science Quiz</h1>
  <button id="qstart" onclick="startQuiz()">Start</button>
  <button id="qget" onclick="fetchques()">Get</button>
  <div id="quizdiv" class="hidequizdiv">
    <p id="quesno"></p>
    <p id="lblquestion"></p>

    <label><input id="rda" name="option" type="radio"> <span id="lbla"></span></label>
    <label><input id="rdb" name="option" type="radio"> <span id="lblb"></span></label><br>
    <label><input id="rdc" name="option" type="radio"> <span id="lblc"></span></label>
    <label><input id="rdd" name="option" type="radio"> <span id="lbld"></span></label><br>
    <input type="radio" style="display: none" id="rde" name="option">
    <button onclick="nextQuestion()">Submit</button>
    <p id="pscore" class="pscore">Score</p>
  </div>

  <script>
    let questions = 0;
    function fetchques() {
      const url = "https://ashishanchal.github.io/Javascript/science.json";
      console.log(url);
      fetch(url)
        .then(Response => {
          if (!Response.ok) {
            throw new Error(`${Response.status}-${Response.statusText}`);
            alert("Error");
          }
          return Response.json();
        })
        .then(data => {
          console.log(data.length);
          const quesdata = data;
          if (quesdata) {
            localStorage.setItem('questions', JSON.stringify(data));
            console.log(quesdata);
          } else {
            displayerror("Question not found");
          }
        })
        .catch(error => {
          displayerror(error.message);
        })
      function displayerror(data) {
        console.log(data);
      }
      function displayques() {

      }
    }

    /**
      const questions = JSON.parse(`[
      {
          "question_no":"1",
          "question":"What is the process by which plants make their food?",
          "a":"Photosynthesis",
          "b":"Sunseeding",
          "c":"Chlorophyll",
          "d":"Planting",
          "correct_ans":"a"
      },
      {
          "question_no":"2",
          "question":" Which planet is known as the Red Planet?",
          "a":"Earth",
          "b":"Jupiter",
          "c":"Mars",
          "d":"Venus",
          "correct_ans":"c"
      },
      {
          "question_no":"3",
          "question":"What is the unit of electrical resistance?",
          "a":"Tesla",
          "b":"Ampere",
          "c":"Volt",
          "d":"Ohm",
          "correct_ans":"d"
      },
      {
          "question_no":"4",
          "question":"What is the most abundant gas in Earth's atmosphere?",
          "a":"Nitrogen",
          "b":"Neon",
          "c":"Oxygen",
          "d":"Carbon",
          "correct_ans":"a"
      },
      {
          "question_no":"5",
          "question":"What is the process of water turning into vapor called?",
          "a":"Condensation",
          "b":"Evaporation",
          "c":"Melting",
          "d":"Hardening",
          "correct_ans":"b"
      },
      {
          "question_no":"6",
          "question":"What is the largest organ in the human body?",
          "a":"Eyes",
          "b":"Ears",
          "c":"Skin",
          "d":"Nose",
          "correct_ans":"c"
      },
      {
          "question_no":"7",
          "question":"What connects muscles to bones?",
          "a":"Nerves",
          "b":"MuscleTissue",
          "c":"Colons",
          "d":"Tendons",
          "correct_ans":"d"
      },
      {
          "question_no":"8",
          "question":"What is the chemical name for rust?",
          "a":"Iron Rust",
          "b":"Iron Oxide",
          "c":"Corrosion",
          "d":"Dusting",
          "correct_ans":"b"
      },
      {
          "question_no":"9",
          "question":"How many planets are in our solar system?",
          "a":"9",
          "b":"3",
          "c":"8",
          "d":"7",
          "correct_ans":"c"
      },
      {
          "question_no":"10",
          "question":"What is the name of the tool used to make distant objects appear closer?",
          "a":"Telescope",
          "b":"Periscope",
          "c":"Magnifier",
          "d":"Satelite",
          "correct_ans":"a"
      }
  ]`);*/
    let quesno = 0;
    let score = 0;

    let totalques = 0;
    const lblquesno = document.getElementById("quesno");
    const quizdiv = document.getElementById("quizdiv");
    const qstart = document.getElementById("qstart");
    const qget = document.getElementById("qget");
    const lblquestion = document.getElementById("lblquestion");
    const lbla = document.getElementById("lbla");
    const lblb = document.getElementById("lblb");
    const lblc = document.getElementById("lblc");
    const lbld = document.getElementById("lbld");
    const rda = document.getElementById("rda");
    const rdb = document.getElementById("rdb");
    const rdc = document.getElementById("rdc");
    const rdd = document.getElementById("rdd");
    const rde = document.getElementById("rde");
    const pscore = document.getElementById("pscore");

    function startQuiz() {
      qstart.style.display = "none";
      quizdiv.classList.remove("hidequizdiv");
      questions = JSON.parse(localStorage.getItem("questions"));
      totalques=questions.length;
      showQuestion();
    }

    function nextQuestion() {
      const selected = getSelectedOption();
      // alert(selected);
      if (selected === "e") {
        alert("Please select an option.");
        return;

      }

      const current = questions[quesno];
      console.log(current);
      if (selected === current.correct_ans) {
        // alert("Correct!");
        score++;
        // alert(score);
        pscore.textContent = `Score: ${score}`;
      } else {
        alert("Wrong! Correct answer");
      }

      quesno++;

      if (quesno == totalques) {
        alert("Quiz Completed");
        quizdiv.classList.add("hidequizdiv");
        pscore.style.display = "block";
        pscore.innerHTML = score;
        return;
      }
      showQuestion();
    }

    function showQuestion() {
      rde.checked = true;
      const q = questions[quesno];
      lblquesno.textContent = `Q${quesno + 1}:`;
      lblquestion.textContent = q.question;
      lbla.textContent = `A) ${q.a}`;
      lblb.textContent = `B) ${q.b}`;
      lblc.textContent = `C) ${q.c}`;
      lbld.textContent = `D) ${q.d}`;
      ;
    }

    function getSelectedOption() {
      if (rda.checked) return "a";
      if (rdb.checked) return "b";
      if (rdc.checked) return "c";
      if (rdd.checked) return "d";
      return "e";
    }
  </script>
</body>

</html>